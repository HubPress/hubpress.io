= Nantes JUG 2013-11-04 : AmÃ©lioration de la qualitÃ© du code par restriction du langage
:hp-tags: Nantes JUG,java
:published_at: 2013-11-08

Comme tous les mois jâ€™ai assistÃ© au JUG Nantes. Cet Ã©vÃ©nement est pour moi un bon moyen de voir de nouvelles choses mais Ã©galement dâ€™Ã©changer sur les outils, les techniques et les diffÃ©rentes bonnes pratiques avec des dÃ©veloppeurs plus confirmÃ©s que moi. Cette session prÃ©sentait un talk intitulÃ© Â« Du SQL au NoSQL en moins dâ€™une heure Â» ainsi quâ€™un quickie dont jâ€™ai honteusement pompÃ© le nom pour cet article. Câ€™est sur ce dernier que va porter mon petit billet.


== Quâ€™est ce que la qualitÃ© de code ?

http://www.hugowood.net/[Hugo Wood] a tout dâ€™abord rappelÃ© ce quâ€™Ã©tait la qualitÃ© de code pour lui. Ce nâ€™est pas parce que lâ€™on a 100% de couverture de code, pleins de TU, plein de TI ainsi que des tests UI automatisÃ©s que la qualitÃ© est au rendez-vous. Il faut avant tout que le code soit *maintenable*. Sans cela pas de qualitÃ©. Ceci passe principalement par de la modularitÃ© et donc de la testabilitÃ© (notamment via la pratique du TDD).	

== Apporter des restrictions pour Ãªtre plus maintenable

AprÃ¨s ce rapide constat auquel jâ€™adhÃ¨re totalement, Hugo prÃ©sente plusieurs restrictions de code sur Java pour aider Ã  amÃ©liorer la qualitÃ© du code.

* Ne pas utiliser *null* : ce nâ€™est pas orientÃ© objet, ce nâ€™est pas type-safe
** *Solution proposÃ©e :* renvoyer toujours un objet (exemple chaÃ®ne vide au lieu de null pour les String).
* Eviter dâ€™utiliser les mÃ©thodes privÃ©es 
** Lorsque lâ€™on crÃ©Ã© des mÃ©thodes privÃ©es pour dÃ©couper le mÃ©tier dâ€™une mÃ©thode publique obÃ¨se, les tests ne sont pas dÃ©coupÃ©s car il nâ€™y a pas de nouveaux points dâ€™entrÃ© pour tester.
** *Solution proposÃ©e :* PrÃ©fÃ©rer un dÃ©coupage en mÃ©thodes de type public/protected/default voir en plusieurs objets pour dÃ©couper les tests.
* Lâ€™hÃ©ritage peut Ãªtre un piÃ¨ge 
** si on teste une classe fille, on teste partiellement la mÃ¨re en mÃªme temps via les super()
** Couplage fort et rupture de lâ€™encapsulation (accÃ¨s aux membres protected ou default)
** *Solution proposÃ©e :* utiliser uniquement les interfaces pour le polymorphisme et utiliser la composition pour la rÃ©utilisation du code
* Static dispatch ou lâ€™enfer 2.0 
** Potentiellement difficile Ã  tester et Ã  maintenir
** DÃ©truit le polymorphisme
** *Solution proposÃ©e :* Ne pas utiliser ğŸ˜€

== Bilan de la prÃ©sentation

Avant tout Hugo rappelle que les restrictions sont trÃ¨s intÃ©ressantes mais quâ€™il ne faut pas non plus Ãªtre un intÃ©griste en ne faisant que Ã§a. Il faut savoir peser le pour et le contre dans lâ€™utilisation ou non de toutes les possibilitÃ© du langage. Par contre, lâ€™application au cas par cas des restrictions peut dÃ©router les dÃ©butants. Dans ce cas, lâ€™application systÃ©matique des restrictions de langage permet de cadrer les dÃ©butants afin de garder un certain niveau de qualitÃ© de code.

Si le sujet vous intÃ©resse, vous pouvez retrouver les slides de la prÃ©sentation Ã  cette adresse : Lien vers les http://fr.slideshare.net/mercury_wood/amliorer-la-qualit-du-code-par-restriction-du-langage[slides de la prÃ©sentation].