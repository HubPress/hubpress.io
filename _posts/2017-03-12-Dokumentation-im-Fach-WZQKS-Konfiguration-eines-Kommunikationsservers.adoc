= Dokumentation im Fach WZQKS (Konfiguration eines Kommunikationsservers)
Andreas Breitbach <andreas.breitbach@gmail.com>

:published-at: 2017-03-12
:hp-tags: systemdoku

:toc:

// Lokalisierung
:lang: de
ifeval::["{lang}" == "de"]
:appendix-caption: Anhang
:caution-caption: Achtung
:example-caption: Beispiel
:figure-caption: Abbildung
:important-caption: Wichtig
:last-update-label: Zuletzt aktualisiert
//:listing-caption: Listing
:manname-title: BEZEICHNUNG
:note-caption: Anmerkung
//:preface-title: Vorwort
:table-caption: Tabelle
:untitled-label: Ohne Titel
:version-label: Version
:warning-caption: Warnung
endif::[]

*Als Berufssch√ºler durfte ich im Fach WZQKS (Aufbau und Betrieb eines Kommunikationsservers) einen einfachen Server mit Linux aufsetzen und entsprechend dokumentieren. Wir sollten ein OpenOffice-ODT-Dokument, ein PDF und eine HTML-Seite abliefern ‚Äì ideales Anwendungsgebiet f√ºr Single Source Publishing mit Asciidoc. Um diese M√∂glichkeiten zu zeigen, stelle ich die Dokumente hier zur Verf√ºgung.*

== Erstellen der geforderten Dokumentationselemente
Asciidoc l√§sst sich am einfachsten unter Linux verwenden. Alle angegebenen Befehle etc. sind auf der beschriebenen Virtuellen Maschine installiert.

Die Dokumente m√ºssen anschlie√üend h√§ndisch an die entsprechenden Orte kopiert werden.

Quelle der nachfolgenden Kommandos: http://www.methods.co.nz/asciidoc/faq.html#_can_you_create_odf_and_pdf_files_using_libreoffice

=== Erstellung der HTML-Datei

[source,bash]

asciidoc -a icons -a numbered -a disable-javascript Dokumentation-WZQKS.adoc

Download der fertigen HTML-Datei: andreas-breitbach.github.io/images/Dokumentation-WZQKS.html[Test]


=== Erstellung der ODT-Datei

Dieses Kommando wird √ºber LibreOffice ausgef√ºhrt.
[source,bash]
lowriter --invisible --convert-to odt Dokumentation-WZQKS.html

Download der fertigen Datei: [ODT-Datei]

=== Erstellung der PDF-Datei

Dieses Kommando wird √ºber LibreOffice ausgef√ºhrt.
[source,bash]
lowriter --invisible --convert-to pdf Dokumentation-WZQKS.odt

Download der fertigen Datei: [PDF-Datei]

== Dokumentation zur Installation und Einrichtung der geforderten Dienste

√Ñnderungen an Konfigurationsdateien werden in dieser Dokumentation als "Diff" dargestellt:

Dazu wurde an die alte Datei *.backup* drangehangen, mit dem folgenden Kommando wurde der Diff erstellt:

**

.Die alte Datei
[source,bash]
--
Dies ist die alte Datei...

diese Zeile wird ge√§ndert...

und diese bleibt so, wie sie ist.
--

.Die neue Datei
[source,bash]
--
Dies ist die alte Datei...

diese Zeile wurde ge√§ndert: "Software is like Sex: It's better when it's free!"

Neue Zeile: üêß (Pinguin in Unicode)

und diese bleibt so, wie sie ist.
--

.Beispiel-√Ñnderung:
[source,bash]
--
3c3,5
< diese Zeile wird ge√§ndert...
---
> diese Zeile wurde ge√§ndert: "Software is like Sex: It's better when it's free!"
>
> Neue Zeile: üêß (Pinguin in Unicode)
--

== Grundinstallation der Virtuellen Maschine

Die Installation wurde mit den Standard-Einstellungen des Instllationsimages *lubuntu-14.04.3-desktop-i386.iso* durchgef√ºhrt.

Nutzername:   `andy`

Passwort:     `ailei3Ah`

Das System wurde anschlie√üend auf den aktuellen Release geupgraded:

.Herunterladen neuer Paket-Indexdateien
[source,bash]
$ sudo apt-get update

.Einspielen der neuen Pakete
[source,bash]
$ sudo apt-get dist-upgrade

=== Sonderkonfigurationen
Im folgenden werden Konfigurationen beschrieben, die speziell f√ºr den Einsatz im Fach WZQKS vorgenommen wurden

==== √Ñnderung des Hostnamens

Das System soll nich tnur √ºber IP-Adresse, sondern auch √ºber einen Namen, hier "breitbach-server", ansprechbar sein. Dazu wurde in der Datei */etc/hosts* folgende Zeile hinzugef√ºgt:

.Anlage eines Hostnamens in der Hosts-Datei
[source,bash]
127.0.1.1 breitbach-server

In der Datei */etc/hostname*

wurde ebenso der neue Hostname hinterlegt:

.Anlage eines Hostnamens in der Hostname-Datei
[source,bash]
breitbach-server

Anschlie√üend wurde der neue Hostname gesetzt:

.Setzen des Hostnamens
[source,bash]
$ sudo hostname -F /etc/hostname

Hiernach wurde die VM neu gebootet, damit die √Ñnderunghen √ºbernommen worden.

==== Einrichtung Lehrer-Account

.Anlage eines neuen Nutzers
[source,bash]
$ sudo adduser lehrer

Anschlie√üend muss das Passwort zweimal eingegeben werden, eine R√ºckmeldung √ºber Sternchen o.√§. zu den Tastendr√ºcken erfolgt nicht.

===== Zugangsdaten des Lehrer-Accounts

Nutzername:   `lehrer`

Passwort:     `geheim`

=== Wine

[, urspr√ºngliches Backronym des Wine-Projekts]
""
Wine Is Not an Emulator
""

Wine ist eine "Kompatibilit√§tsschicht" f√ºr Windows-Anwendungen, um diese unter Linux nutzen zu k√∂nnen. √úber diese Schicht werden Programmaufrufe an die entsprechenden Linux-Bestandteile durchgereicht bzw. passend √ºbersetzt. Ein Emulator w√ºrde hingegen die Befehle 1:1 wie im Originalprogramm vorgesehen ausf√ºhren, udn w√§re damit quasi ein Windows-Nachbau. Mit https://www.reactos.org/[ReactOS] existiert ein solches Projekt, das aber noch nicht √ºber den Alpha-Status hinausgekommen ist.
Demgegen√ºber lassen sich viele Windows-Anwendungen und Spiele seit langem unter Wine benutzen.

==== Installation von Wine
Wine und die Hilfsanwendung Winetricks werden wie folgt installiert. Die Software ist dann direkt lauff√§hig.

.Installation von Wine
[source,bash]
$ sudo apt-get install wine winetricks

Die ben√∂tigten Anwendungen wurden mit FTP in das Nutzer-Verzeichnis "/home/lehrer/bin" √ºbertragen.

Von dort wurden die Daten symbolisch mit einem Icon auf dem Desktop verkn√ºpft: STRG+Umsch und dann per Drag&Drop auf den Desktop gezogen. √úber die "Dateieigenschaften" wurde der Name angepasst. F√ºr Solit√§re funktionierte diese √Ñnderung. Beim Start gibt Notepad++ eine Fehlermeldung aus, die entsprechende Datei ist jedoch an der angegebenen Stelle vorhanden.

=== FTP

F√ºr den Up- und Download von Dateien wurde ein FTP-Server installiert:

.Installation des FTP-Servers "vsftpd"
[source,bash]
$ sudo apt-get install vsftpd

Nach der Installation wurde der Server mit

Die Konfiguration befindet sich in der Datei */etc/vsftpd.conf*. Hier muss nur diese Einstellung ge√§ndert werden:

.√Ñnderung an der Konfigurationsdatei f√ºr vsftpd
[source,bash]
31c31
< write_enable=YES
---
> #write_enable=YES

Der Login ist dann mit der Adresse des Servers und den Nutzerdaten m√∂glich.

=== Apache

F√ºr den Abruf von Webseiten wurde Apache installiert.

.Installation des Apache-Webservers
[source,bash]
$ sudo apt-get install apache2

Der Server wird dann automatisch gestartet. Die abzurufenden Webseiten k√∂nnen unter bereit gestellt werden. Die "Einstiegsseite" *muss* _index.html_ hei√üen. In dieser Isntallation werden die Webseiten im Standard-Verzeichnis abgelegt.

.Standard-Verzeichnis f√ºr Webinhalte in Apache
[source,bash]
$ /var/www/html

=== X2Go

http://www.ubuntugeek.com/xrdp-remote-desktop-protocol-rdp-server.html

F√ºr die Verwendung von X2Go musste zun√§chst ein "PPA" installiert werden. In diesen Personal Packages Archiv stellen die Entwickler Pakete bereit, die nicht in den offiziellen Ubuntu-Repositories zur Verf√ºgung stehen. Mit diesem Kommando lassen sich die Paketquellen hinzuf√ºgen.

.Hinzuf√ºgen des X2Go-Repository und anschlie√üende Installation von X2Go
[source,bash]
$ sudo add-apt-repository ppa:x2go/stable
$ sudo apt-get update
$ sudo apt-get install x2goserver x2goserver-xsession
$ sudo apt-get install x2golxdebindings

Das Paket x2golxdebindings wird f√ºr die Verwendung von LXDE ben√∂tigt.

=== Samba
Mit Samba lassen sich Dateien, Drucker und weitere Ressourcen zur Verf√ºgugn stellen. Anders als bei FTP wird hierzu kein eigener Client ben√∂tigt, der Zugriff geschieht √ºber den Dateimanager bzw. Explorer.

.Installation von Samba
[source,bash]
$ sudo apt-get install samba

Folgende √Ñnderungen wurden anschlie√üend an der Konfiguration vorgenommen:

.√Ñnderungen an der Samba-Konfiguration
[source,bash]
254,263d253
<
<
< [Freigabe]
< 	comment = samba
< 	path = /samba
< 	guest ok = yes
< 	public = yes
< 	writeable = yes
< 	browseable = yes
<
269a260
>


Damit auch jeder Nutzer auf die freigabe */samba* zugreifen kann, muss diese dem Nutzer "nobody" bzw. der Gruppe "nogroup" geh√∂ren.

.√Ñnderungen am Samba-Verzeichnis
[source,bash]
$ sudo chgrp nogroup samba/
$ sudo chown nobody samba/


=== Installation von AsciiDoc

.Einspielen der zus√§tzlich ben√∂tigten Pakete
[source,bash]
$ sudo apt-get asciidoc source-highlight
